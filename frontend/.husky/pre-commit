#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Run architecture verification as part of pre-commit
echo "ğŸ” Verifying architecture..."
npm run verify:architecture || (echo "âŒ Architecture verification failed. Please fix the issues before committing." && exit 1)

# Check for circular dependencies
echo "ğŸ”„ Checking for circular dependencies..."
npm run check:circular || (echo "âŒ Circular dependencies detected. Please fix the cycles before committing." && exit 1)

# Continue with other pre-commit checks
npm run lint || (echo "âŒ Lint failed. Please fix lint errors before committing." && exit 1)

npm test || (echo "âŒ Tests failed. Please fix test errors before committing." && exit 1)
